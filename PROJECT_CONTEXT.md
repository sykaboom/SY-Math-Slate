# Project Context

## 목적과 비전
- 목표: 수학 강사의 노동(문서 제작 + 해설 영상 제작)을 줄이는 통합 앱 생태계 구축.
- 장기 비전: 한글(HWP), PDF, Docs, Word의 경계를 허무는 수학 교육용 저작/판서/영상 플랫폼.
- 상위 비전: 다양한 AI/도구가 정규화된 콘텐츠 계약으로 연결되는 **AI 교육허브**로 확장.

## 두 앱의 관계 (현재 기준)
- **math-pdf-builder**: 문제지/시험지 등 문서 제작 중심. (현재 워드 편집기화 리팩토링 진행 중)
- **slate (SY-Math-Slate)**: 판서/해설 영상 제작 중심. (touch/recording UX 기반)
- 결론: **slate가 새로운 표준 포맷(수식/콘텐츠 스펙)의 기준을 잡고**, pdf-builder는 리팩토링 완료 후 이를 따라오게 한다.

## 핵심 원칙
- **직관성 우선**: DSL/태그는 처음 보는 강사가 설명서 없이도 맥락으로 이해 가능한 형태여야 한다.
- **모듈화 최우선**: DSL/파서/렌더/규칙은 분리하여 유지보수와 교체가 쉽도록 한다.
- **성능/안정성**: MathJax 렌더는 캐시 + 지연 렌더로 최적화한다.

## Math Spec 방향 (v2 설계 기준)
- **슬레이트에서 표준 확립 → pdf-builder가 추종**.
- 수식 구분자는 `$...$`, `$$...$$`를 기준으로 하되,
  - `\displaystyle` 자동 부착,
  - `\frac → \dfrac` 보정 등 **가독성 규칙을 앱이 자동 적용**한다.
- MathJax 렌더 엔진은 **모듈화**하여 교체 가능하게 한다.

## DSL 방향성 (진행 원칙)
- 현재는 **구조/형태를 먼저 잡고**, pdf-builder 리팩토링이 끝난 뒤 DSL을 확정한다.
- DSL은 **직관적인 키워드 기반 문법**을 우선 검토.
- 토큰/태그는 **규칙 파일(데이터)**로 관리하여 코드 수정 없이 바꿀 수 있어야 한다.

## 커스텀 토큰/태그 정책
- 토큰 정의는 **앱 전역 기본 + 사용자 개별 덮어쓰기** 구조.
- 사용자 커스터마이징은 **다운로드/불러오기 방식**을 먼저 지원.
- 향후 로그인 기반 동기화로 확장 예정.
- 목표: 커뮤니티에서 토큰팩을 공유할수록 사용성이 높아지는 구조.

## 현재 작업 흐름 (협업/역할)
- Codex: 로직/정확성 중심 구현, 명세 검증 담당.
- Gemini: 디자인/컨텍스트/시안 중심.
- 협업 규칙은 `GEMINI_CODEX_PROTOCOL.md`에 따른다.

## 단기 로드맵 (Historical, Archived)
- 이 섹션은 초기 단계(Task 010 시점) 컨텍스트이며, 현재 실행 계획 SSOT가 아니다.
- 현재/다음 실행 계획은 `PROJECT_ROADMAP.md`와 승인된 `codex_tasks/*`를 따른다.
